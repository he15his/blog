

#### 防止中间人

中间人只需要把原本双方通信互发的公钥,换成自己的公钥,这样中间人就可以轻松解密通信双方所发送的所有数据



为解决上述中间人问题,于是后来就出现了`证书`,简单来讲就是找了一个大家公认的`中介`,来证明`我就是我,你就是你`的问题,防止中间被篡改:

```
证书中就包括个人的基本信息和最重要的公钥
```



但证书在传输的过程中如果被篡改了呢,所以后来就又出现了`数字签名`:

```
简单来讲,就是将公钥和个人信息用一个Hash算法生成一个消息摘要
这个Hash算法有个极好的特性,只要输入数据有一点点变化,那生成的消息摘要就会有巨变,能有效防止别人篡改数据
但这还是有个问题,如果中间人直接把整个原始信息依然可以伪造消息摘要
所以就出现了CA,这时CA再用它的私钥对消息摘要加密,形成签名,并把原始信息和数据签名进行合并,即所谓的数字证书
这样,当别人把他的证书发过来的时候,我再用同样的Hash算法,再次生成消息摘要
然后用CA的公钥对数字签名解密,得到CA创建的消息摘要,两者一比,就知道中间有没有被人篡改了
```



关于CA自身的安全问题:

* 1.这些CA本身也有证书来证明自己的身份,并且CA的信用是像树一样分级的,高层的CA给底层的CA做信用背书

* 2.而操作系统／浏览器中会内置一些顶层的CA的证书,其实就相当于你自动信任了他们
* 3.这些顶层的CA证书务必得安全地放入操作系统／浏览器当中,否则就全部乱套了